<template>
  <div class="log-body">
    <div id="log-div">
      <img src="./../../assets/QG.png" id="log-img" />
      <p>QG工作室招新平台</p>

      <div class="log-input">
        <div class="log-svg">
          <svg
            t="1595992431652"
            viewBox="0 0 1820 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            p-id="1173"
          >
            <path
              d="M1127.841185 403.076741c0-121.362963-97.09037-218.453333-218.453333-218.453334s-218.453333 97.09037-218.453333 218.453334c0 82.526815 43.690667 152.917333 111.653925 189.326222-92.235852 36.408889-162.62637 116.508444-182.044444 218.453333-2.427259 12.136296 4.854519 26.699852 19.418074 29.127111h4.854519c12.136296 0 21.845333-7.281778 24.272592-19.418074 21.845333-114.081185 121.362963-196.608 237.871408-199.035259h4.854518c118.945185 0 216.026074-97.09037 216.026074-218.453333z m-388.352 0c0-94.663111 75.245037-169.908148 169.908148-169.908148s169.908148 75.245037 169.908148 169.908148c0 92.235852-75.245037 167.480889-167.480888 169.908148H904.533333c-92.22637-2.427259-165.044148-77.672296-165.044148-169.908148z m330.107259 220.880592c-12.136296-7.281778-26.699852-4.854519-33.981629 7.281778-7.281778 12.136296-4.854519 26.699852 7.281778 33.98163 55.826963 38.836148 94.663111 92.235852 106.799407 155.344592 2.427259 12.136296 12.136296 19.418074 24.272593 19.418074h4.854518c12.136296-2.427259 21.845333-14.563556 19.418074-29.127111-14.563556-75.245037-60.681481-140.781037-128.644741-186.898963z m0 0"
              p-id="1174"
            ></path>
          </svg>
        </div>
        <input
          type="text"
          placeholder="账号"
          onfocus="this.placeholder=''"
          v-model="username"
          onblur="this.placeholder='账号'"
        />
      </div>

      <div class="log-input">
        <div class="log-svg log-lock">
          <svg
            t="1595993348018"
            class="icon"
            viewBox="0 0 1024 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            p-id="2175"
          >
            <path
              d="M512 597.333333c-46.933333 0-85.333333 38.4-85.333333 85.333333 0 21.333333 8.533333 42.666667 21.333333 55.466667 0 4.266667 0 4.266667 0 8.533333 0 34.133333 29.866667 64 64 64 34.133333 0 64-29.866667 64-64 0-4.266667 0-4.266667 0-8.533333 12.8-12.8 21.333333-34.133333 21.333333-55.466667C597.333333 631.466667 558.933333 597.333333 512 597.333333zM533.333333 712.533333l0 25.6c0 12.8-8.533333 21.333333-21.333333 21.333333-12.8 0-21.333333-8.533333-21.333333-21.333333l0-25.6c-12.8-8.533333-21.333333-21.333333-21.333333-34.133333 0-21.333333 17.066667-42.666667 42.666667-42.666667 21.333333 0 42.666667 17.066667 42.666667 42.666667C554.666667 695.466667 546.133333 708.266667 533.333333 712.533333zM763.733333 426.666667 763.733333 302.933333c0-136.533333-110.933333-251.733333-251.733333-251.733333-136.533333 0-251.733333 110.933333-251.733333 251.733333L260.266667 426.666667c-46.933333 0-85.333333 38.4-85.333333 85.333333l0 375.466667c0 46.933333 38.4 85.333333 85.333333 85.333333l499.2 0c46.933333 0 85.333333-38.4 85.333333-85.333333L844.8 512C844.8 465.066667 806.4 426.666667 763.733333 426.666667zM302.933333 302.933333c0-115.2 93.866667-209.066667 209.066667-209.066667 115.2 0 209.066667 93.866667 209.066667 209.066667L721.066667 426.666667 302.933333 426.666667 302.933333 302.933333zM802.133333 887.466667c0 21.333333-17.066667 42.666667-42.666667 42.666667L260.266667 930.133333c-21.333333 0-42.666667-17.066667-42.666667-42.666667L217.6 512c0-21.333333 17.066667-42.666667 42.666667-42.666667l456.533333 0 42.666667 0c21.333333 0 42.666667 17.066667 42.666667 42.666667L802.133333 887.466667z"
              p-id="2176"
            ></path>
          </svg>
        </div>
        <input
          type="password"
          placeholder="密码"
          onfocus="this.placeholder=''"
          onblur="this.placeholder='密码'"
          v-model="password"
        />
      </div>

      <div id="log-rem">
        <input type="checkbox" id="rem" v-model="rememberMe" /><span id="rem-me"
          >记住我</span
        >
      </div>

      <button id="log-in" @click="login()" @keyup.enter.native="login()">登 录</button>
    </div>
  </div>
</template>
<script>
export default {
  name: "Login",
  data() {
    return {
      password: "",
      username: "",
      rememberMe: "",
    };
  },
  methods: {
    // 登录
    login() {
      const lmsg = this.$Message.loading({
        content: "登录中...",
        duration: 0,
      });
      this.$http
        .get(
          this.domain +
            `login?username=${this.username}&password=${this.password}`
        )
        .then((res) => {
          setTimeout(lmsg, 0);
          if (res.data.status == true) {
            this.$Message.success("登录成功！");
            if (document.getElementById("rem").checked) {
              localStorage.setItem("token", res.data.message);
              localStorage.setItem("username", this.username);
              localStorage.setItem("password", this.password);
            } else {
              sessionStorage.setItem("token", res.data.message);
              sessionStorage.setItem("username", this.username);
              sessionStorage.setItem("password", this.password);
            }
            setTimeout(() => {
              window.location.href = "/Statistic";
            }, 1000);
          } else {
            this.$Message.warning("账号或密码错误");
          }
        })
        .catch((err) => {
          this.$Message.error("服务器连接失败");
        });
    },
  },
};
</script>
<style lang="scss" scoped>
@import "Login";
</style>